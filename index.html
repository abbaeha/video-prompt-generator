<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generator Prompt Video Sinematik</title>
    <style>
        :root {
            --primary-color: #6C63FF;
            --secondary-color: #F8F9FA;
            --accent-color: #E91E63;
            --dark-bg: #1a1a1a;
            --dark-card: #2d2d2d;
            --dark-text: #f5f5f5;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, var(--secondary-color) 0%, #ffffff 100%);
            transition: background 0.3s ease;
        }

        body.dark-mode {
            background: linear-gradient(135deg, var(--dark-bg) 0%, #121212 100%);
        }

        .container {
            max-width: 1200px;
            margin: auto;
            padding: 20px;
        }

        .card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 20px;
            transition: background 0.3s ease;
        }

        body.dark-mode .card {
            background: var(--dark-card);
        }

        h2 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            color: #333;
            font-weight: 500;
        }

        body.dark-mode label {
            color: var(--dark-text);
        }

        select, input[type="text"], textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        body.dark-mode select,
        body.dark-mode input[type="text"],
        body.dark-mode textarea {
            background: #444;
            color: var(--dark-text);
            border: 1px solid #666;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary:hover {
            background: #5a52d6;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }

        .prompt-results {
            margin-top: 30px;
        }

        .prompt-box {
            background: #f5f5f5;
            padding: 15px;
            border-left: 4px solid var(--accent-color);
            margin-bottom: 15px;
            position: relative;
            border-radius: 5px;
            transition: transform 0.3s ease;
            white-space: pre-wrap;
            font-family: monospace;
            line-height: 1.6;
            max-height: 400px;
            overflow-y: auto;
        }

        body.dark-mode .prompt-box {
            background: #333;
        }

        .prompt-box:hover {
            transform: translateX(5px);
        }

        .prompt-type {
            background: var(--accent-color);
            color: white;
            padding: 3px 8px;
            border-radius: 5px;
            position: absolute;
            top: -8px;
            left: 10px;
            font-size: 14px;
            font-weight: bold;
        }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .section {
            overflow: hidden;
            transition: max-height 0.3s ease;
            max-height: 500px;
        }

        .section.collapsed {
            max-height: 0;
        }

        .section-header {
            background: #eee;
            padding: 10px;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            transition: background 0.3s;
        }

        .section-header:hover {
            background: #ddd;
        }

        .dark-mode .section-header {
            background: #444;
        }

        .dark-mode .section-header:hover {
            background: #555;
        }

        .arrow {
            transition: transform 0.3s ease;
        }

        .section.collapsed .arrow {
            transform: rotate(-90deg);
        }

        .loading {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--primary-color);
            padding: 20px;
            justify-content: center;
        }

        .tab-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .tab-button {
            padding: 8px 16px;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            background: #f0f0f0;
            transition: all 0.3s;
        }

        .tab-button:hover {
            background: #e0e0e0;
        }

        .tab-button.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .history-item {
            margin-bottom: 10px;
            padding: 10px;
            background: #f8f8f8;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: transform 0.2s;
        }

        .history-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .dark-mode .history-item {
            background: #333;
        }

        .history-buttons {
            display: flex;
            gap: 8px;
        }

        .btn-secondary {
            background: #ddd;
            color: #333;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-secondary:hover {
            background: #ccc;
        }

        .dark-mode .btn-secondary {
            background: #555;
            color: #fff;
        }

        .dark-mode .btn-secondary:hover {
            background: #666;
        }

        .character-list {
            margin-top: 15px;
            border-top: 1px solid #eee;
            padding-top: 15px;
        }

        .character-item {
            background: #f9f9f9;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .dark-mode .character-item {
            background: #2a2a2a;
        }

        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--primary-color);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div style="text-align: center; margin-bottom: 30px; position: relative;">
            <h1 style="margin-bottom: 10px;">Generator Prompt Video Sinematik</h1>
            <p style="color: #666; max-width: 600px; margin: 0 auto 20px;">Alat untuk membuat prompt video berkualitas tinggi dengan pengaturan sinematik lengkap</p>
            <button onclick="toggleDarkMode()" style="position: absolute; top: 0; right: 0; background: #f0f0f0; border: none; border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; cursor: pointer;">
                🌙
            </button>
        </div>

        <!-- Karakter -->
        <div class="card">
            <div class="section-header" onclick="toggleSection(this)">
                <h2>Manajemen Karakter</h2>
                <span class="arrow">▶</span>
            </div>
            <div class="section">
                <div class="grid-container">
                    <div class="form-group">
                        <label>Nama Karakter</label>
                        <input type="text" id="characterName" placeholder="Jendral Kaelan">
                    </div>
                    <div class="form-group">
                        <label>Penampilan Fisik</label>
                        <textarea rows="3" id="physicalAppearance" placeholder="Contoh: Pria 30 tahun, rambut hitam ikal, mata tajam, tinggi sekitar 180cm, tubuh atletis"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Gaya Pakaian Khas</label>
                        <textarea rows="3" id="clothingStyle" placeholder="Contoh: Selalu memakai kemeja flanel merah, celana cargo hitam, dan sepatu boot militer"></textarea>
                    </div>
                </div>
                <button class="btn-primary" onclick="addCharacter()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
                    </svg>
                    Tambah Karakter
                </button>
                
                <div class="character-list" id="characterList">
                    <!-- Karakter akan ditampilkan di sini -->
                </div>
            </div>
        </div>

        <!-- Adegan -->
        <div class="card">
            <div class="section-header" onclick="toggleSection(this)">
                <h2>Penyusunan Adegan</h2>
                <span class="arrow">▶</span>
            </div>
            <div class="section">
                <div class="grid-container">
                    <div class="form-group">
                        <label>Deskripsi Inti Adegan</label>
                        <textarea rows="3" id="sceneDescription" placeholder="Contoh: Sebuah pertemuan rahasia di malam hari antara dua agen rahasia di bawah hujan deras"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Lokasi & Atmosfer</label>
                        <input type="text" id="locationAtmosphere" placeholder="Contoh: gang sempit di kota hujan, pencahayaan neon yang redup">
                    </div>
                    <div class="form-group">
                        <label>Pilih Mood</label>
                        <select id="moodSelector">
                            <option disabled selected>Pilih Mood</option>
                            <option>Eerie (Mencekam)</option>
                            <option>Nostalgic (Nostalgia)</option>
                            <option>Tense (Tegang)</option>
                            <option>Peaceful (Damai)</option>
                            <option>Hopeful (Penuh Harapan)</option>
                            <option>Melancholic (Melankolis)</option>
                            <option>Gritty (Kasar)</option>
                            <option>Surreal (Tidak Nyata)</option>
                            <option>Dreamlike (Seperti Mimpi)</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- Suara & Dialog -->
        <div class="card">
            <div class="section-header" onclick="toggleSection(this)">
                <h2>Desain Suara & Dialog</h2>
                <span class="arrow">▶</span>
            </div>
            <div class="section">
                <div class="grid-container">
                    <div class="form-group">
                        <label>Musik Latar</label>
                        <input type="text" id="backgroundMusic" placeholder="Contoh: alunan piano melankolis dengan tempo lambat">
                    </div>
                    <div class="form-group">
                        <label>Efek Suara (SFX)</label>
                        <input type="text" id="soundEffects" placeholder="Contoh: suara hujan, gema langkah kaki, dentingan gelas">
                    </div>
                    <div class="form-group">
                        <label>Baris Dialog</label>
                        <textarea rows="3" id="dialogueLine" placeholder="Contoh: 'Kita tidak punya banyak waktu. Mereka sudah tahu lokasi kita.'"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Nada Bicara</label>
                        <input type="text" id="toneOfVoice" placeholder="Contoh: Berbisik, tegang, dengan sedikit getar ketakutan">
                    </div>
                </div>
            </div>
        </div>

        <!-- Sinematografi -->
        <div class="card">
            <div class="section-header" onclick="toggleSection(this)">
                <h2>Sinematografi & Teknis</h2>
                <span class="arrow">▶</span>
            </div>
            <div class="section">
                <div class="grid-container">
                    <div class="form-group">
                        <label>Pergerakan Kamera</label>
                        <select id="cameraMovement">
                            <option disabled selected>Pilih Pergerakan Kamera</option>
                            <option>Orbit / Rotate 360°</option>
                            <option>Slow Push-in (Mendekat)</option>
                            <option>Pull-out Reveal (Menjauh)</option>
                            <option>Crane Up/Down (Naik/Turun)</option>
                            <option>Tilt Down/Up (Miring Atas/Bawah)</option>
                            <option>Top-down Pan (Geser dari Atas)</option>
                            <option>Slide/Track Sideways (Geser ke Samping)</option>
                            <option>Zoom In/Out</option>
                            <option>Static Shot (Kamera Diam)</option>
                            <option>Tracking Shot (Mengikuti Subjek)</option>
                            <option>Handheld (Gaya Genggam)</option>
                            <option>POV (Sudut Pandang Subjek)</option>
                            <option>Steadicam (Halus & Stabil)</option>
                            <option>Slow Motion</option>
                            <option>Rack Focus (Pindah Fokus)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Sudut Kamera</label>
                        <select id="cameraAngle">
                            <option disabled selected>Pilih Sudut Kamera</option>
                            <option>Close-up</option>
                            <option>Extreme Close-up / Macro</option>
                            <option>Medium shot</option>
                            <option>Low angle (Dari Bawah)</option>
                            <option>High angle (Dari Atas)</option>
                            <option>Top-down / Flatlay</option>
                            <option>Dutch angle (Miring)</option>
                            <option>Backlit silhouette</option>
                            <option>Wide shot (Lebar)</option>
                            <option>Over-the-shoulder</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Pencahayaan</label>
                        <select id="lighting">
                            <option disabled selected>Pilih Pencahayaan</option>
                            <option>Dramatic Side Lighting</option>
                            <option>Moody Shadows</option>
                            <option>Golden Hour</option>
                            <option>Blue Hour</option>
                            <option>Backlight with Rim Light</option>
                            <option>Soft Light</option>
                            <option>Studio Spotlight</option>
                            <option>Flickering Neon</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Gaya Visual</label>
                        <select id="visualStyle">
                            <option disabled selected>Pilih Gaya Visual</option>
                            <option>Hyperreal CGI</option>
                            <option>Inspired by Apple Ads</option>
                            <option>35mm Film Look</option>
                            <option>Analog Grain</option>
                            <option>Cinematic LUT</option>
                            <option>Inspired by Blade Runner</option>
                            <option>Wong Kar Wai Aesthetic</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Rasio Aspek</label>
                        <select id="aspectRatio">
                            <option disabled selected>Pilih Rasio Aspek</option>
                            <option>16:9 (Layar Lebar)</option>
                            <option>9:16 (Vertikal)</option>
                            <option>1:1 (Persegi)</option>
                            <option>4:3 (TV Klasik)</option>
                            <option>2.35:1 (Layar Lebar Sinematik)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Kualitas Video</label>
                        <select id="videoQuality">
                            <option disabled selected>Pilih Kualitas Video</option>
                            <option>4K</option>
                            <option>HD</option>
                            <option>Cinematic Quality</option>
                            <option>Hyper-realistic</option>
                            <option>Crystal clear</option>
                            <option>Vintage Film (Grainy)</option>
                            <option>Lo-fi Style</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tombol Generate -->
        <div class="action-buttons">
            <button class="btn-primary" style="font-size: 18px; padding: 15px 30px;" onclick="generatePrompts()">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16" style="margin-right: 8px;">
                    <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                    <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                </svg>
                Generate Prompt
            </button>
        </div>

        <!-- Hasil Prompt -->
        <div class="card">
            <h2>Hasil Prompt</h2>
            <div class="tab-buttons">
                <button class="tab-button active" onclick="showTab('id')">Bahasa Indonesia</button>
                <button class="tab-button" onclick="showTab('en')">English</button>
                <button class="tab-button" onclick="showTab('opt')">Optimized</button>
            </div>
            <div id="promptResults">
                <div class="prompt-box" id="idPrompt" style="display: block;">
                    <div class="prompt-type">Indonesia</div>
                    <!-- Hasil prompt akan muncul di sini -->
                </div>
                <div class="prompt-box" id="enPrompt" style="display: none;">
                    <div class="prompt-type">English</div>
                </div>
                <div class="prompt-box" id="optPrompt" style="display: none;">
                    <div class="prompt-type">Optimized</div>
                </div>
            </div>
            <div class="action-buttons">
                <button class="btn-primary" onclick="copyPrompt()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" style="margin-right: 8px;">
                        <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
                        <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
                    </svg>
                    Salin Prompt
                </button>
                <button class="btn-primary" onclick="exportPrompt()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" style="margin-right: 8px;">
                        <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                        <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                    </svg>
                    Ekspor (.txt)
                </button>
            </div>
        </div>

        <!-- Riwayat -->
        <div class="card">
            <h2>Riwayat Prompt</h2>
            <div id="historyList">
                <p>Belum ada riwayat prompt.</p>
            </div>
        </div>
    </div>

    <div class="toast" id="toast">Prompt berhasil disalin!</div>

    <script>
        let darkMode = false;
        let history = [];
        let characters = [];
        let selectedCharacter = null;

        function toggleDarkMode() {
            darkMode = !darkMode;
            document.body.classList.toggle('dark-mode');
            localStorage.setItem('darkMode', darkMode);
            
            const darkModeBtn = document.querySelector('[onclick="toggleDarkMode()"]');
            darkModeBtn.innerHTML = darkMode ? '☀️' : '🌙';
        }

        function toggleSection(header) {
            const section = header.nextElementSibling;
            section.classList.toggle('collapsed');
            const arrow = header.querySelector('.arrow');
            arrow.style.transform = section.classList.contains('collapsed') ? 'rotate(-90deg)' : 'rotate(0)';
        }

        function generatePrompts() {
            const loading = document.createElement('div');
            loading.className = 'loading';
            loading.innerHTML = '<div class="loader"></div> Processing...';
            document.getElementById('promptResults').innerHTML = '';
            document.getElementById('promptResults').appendChild(loading);

            setTimeout(() => {
                const character = document.getElementById('characterName').value || 'Protagonis';
                const physicalAppearance = document.getElementById('physicalAppearance').value || '[penampilan fisik]';
                const clothingStyle = document.getElementById('clothingStyle').value || '[gaya pakaian]';
                const mood = document.getElementById('moodSelector').value;
                const cameraMovement = document.getElementById('cameraMovement').value;
                const cameraAngle = document.getElementById('cameraAngle').value;
                const lighting = document.getElementById('lighting').value;
                const visualStyle = document.getElementById('visualStyle').value;
                const aspectRatio = document.getElementById('aspectRatio').value;
                const videoQuality = document.getElementById('videoQuality').value;
                const sceneDescription = document.getElementById('sceneDescription').value || '[deskripsi adegan]';
                const locationAtmosphere = document.getElementById('locationAtmosphere').value || '[lokasi dan atmosfer]';
                const backgroundMusic = document.getElementById('backgroundMusic').value || '[musik latar]';
                const soundEffects = document.getElementById('soundEffects').value || '[efek suara]';
                const dialogueLine = document.getElementById('dialogueLine').value || '[baris dialog]';
                const toneOfVoice = document.getElementById('toneOfVoice').value || '[nada bicara]';
                
                // Prompt Indonesia
                const indonesianPrompt = `Cinematic Scene Prompt Generator v2.0

[MOOD] 
${mood}: ${getMoodDescription(mood)} 

[CHARACTER] 
Main Character: ${character} 
Appearance: ${physicalAppearance} 
Clothing: ${clothingStyle} 

[SCENE] 
Description: ${sceneDescription} 
Location & Atmosphere: ${locationAtmosphere} 

[CINEMATOGRAPHY] 
Camera Movement: ${cameraMovement} 
Camera Angle: ${cameraAngle} 
Lighting: ${lighting} 
Visual Style: ${visualStyle} 
Aspect Ratio: ${aspectRatio} 
Video Quality: ${videoQuality} 

[AUDIO DESIGN] 
Background Music: ${backgroundMusic} 
Sound Effects: ${soundEffects} 
Dialogue Line: "${dialogueLine}" 
Tone of Voice: ${toneOfVoice} 

[TECHNICAL NOTES] 
- Resolution: 4K UHD 
- Frame Rate: 24fps 
- Color Grading: ${getColorGrading(visualStyle)} 
- Export Preset: ${getExportPreset(videoQuality)}`;

                // Prompt English
                const englishPrompt = `Cinematic Scene Prompt Generator v2.0

[MOOD] 
${mood}: ${getMoodDescription(mood, 'en')} 

[CHARACTER] 
Main Character: ${character} 
Appearance: ${physicalAppearance} 
Clothing: ${clothingStyle} 

[SCENE] 
Description: ${sceneDescription} 
Location & Atmosphere: ${locationAtmosphere} 

[CINEMATOGRAPHY] 
Camera Movement: ${cameraMovement} 
Camera Angle: ${cameraAngle} 
Lighting: ${lighting} 
Visual Style: ${visualStyle} 
Aspect Ratio: ${aspectRatio} 
Video Quality: ${videoQuality} 

[AUDIO DESIGN] 
Background Music: ${backgroundMusic} 
Sound Effects: ${soundEffects} 
Dialogue Line: "${dialogueLine}" 
Tone of Voice: ${toneOfVoice} 

[TECHNICAL NOTES] 
- Resolution: 4K UHD 
- Frame Rate: 24fps 
- Color Grading: ${getColorGrading(visualStyle, 'en')} 
- Export Preset: ${getExportPreset(videoQuality, 'en')}`;

                // Prompt Optimized
                const optimizedPrompt = `Cinematic ${mood.toLowerCase()} scene featuring ${character} in a ${locationAtmosphere}. Use ${cameraMovement} camera movement with ${cameraAngle} angle, combined with ${lighting} lighting and ${visualStyle} visual style. Maintain ${aspectRatio} aspect ratio for optimal composition with ${videoQuality} quality. Include dialogue: "${dialogueLine}" delivered in ${toneOfVoice} tone. Enhance atmosphere with subtle ${soundEffects} sound effects and ${backgroundMusic} background music. Apply ${visualStyle.toLowerCase()} aesthetic with ${getColorGrading(visualStyle, 'en')} color grading at 24fps.`;

                displayResults(indonesianPrompt, englishPrompt, optimizedPrompt);
                saveToHistory(indonesianPrompt);
            }, 800);
        }

        function getMoodDescription(mood, lang = 'id') {
            const descriptions = {
                'id': {
                    "Eerie (Mencekam)": "Nuansa gelap dengan pencahayaan minimal untuk meningkatkan ketegangan.",
                    "Nostalgic (Nostalgia)": "Warna kekuningan dan grain film untuk kesan retrospektif.",
                    "Tense (Tegang)": "Ketegangan visual melalui pencahayaan kontras dan gerakan kamera dinamis.",
                    "Peaceful (Damai)": "Pemandangan alami dengan warna pastel dan pencahayaan lembut.",
                    "Hopeful (Penuh Harapan)": "Warna cerah dengan transisi cahaya yang simbolis.",
                    "Melancholic (Melankolis)": "Warna biru keabuan dengan pencahayaan rendah.",
                    "Gritty (Kasar)": "Detail kasar dengan pencahayaan harsh dan sudut kamera rendah.",
                    "Surreal (Tidak Nyata)": "Efek visual tidak realistis dengan distorsi perspektif.",
                    "Dreamlike (Seperti Mimpi)": "Transisi lembut dan efek lensa yang mengaburkan batas realitas."
                },
                'en': {
                    "Eerie (Mencekam)": "Dark tones with minimal lighting to heighten tension.",
                    "Nostalgic (Nostalgia)": "Amber tones with film grain for a retrospective feel.",
                    "Tense (Tegang)": "Visual tension through contrast lighting and dynamic camera movements.",
                    "Peaceful (Damai)": "Natural scenery with pastel colors and soft lighting.",
                    "Hopeful (Penuh Harapan)": "Bright colors with symbolic light transitions.",
                    "Melancholic (Melankolis)": "Grey-blue tones with low lighting.",
                    "Gritty (Kasar)": "Rough details with harsh lighting and low camera angles.",
                    "Surreal (Tidak Nyata)": "Unrealistic visual effects with perspective distortion.",
                    "Dreamlike (Seperti Mimpi)": "Soft transitions and lens effects that blur reality boundaries."
                }
            };
            return descriptions[lang][mood] || (lang === 'id' ? "Deskripsi tidak tersedia." : "Description not available.");
        }

        function getColorGrading(style, lang = 'id') {
            const colorGrading = {
                'id': {
                    "Hyperreal CGI": "High dynamic range dengan saturasi intens",
                    "Inspired by Apple Ads": "Warna pastel dengan pencahayaan halus",
                    "35mm Film Look": "Film grain dengan kontras moderat",
                    "Analog Grain": "Efek film analog dengan noise halus",
                    "Cinematic LUT": "Palet warna profesional dengan kontras tinggi",
                    "Inspired by Blade Runner": "Palet biru-merah dengan kontras tinggi",
                    "Wong Kar Wai Aesthetic": "Warna jenuh dengan efek bokeh dramatis"
                },
                'en': {
                    "Hyperreal CGI": "High dynamic range with intense saturation",
                    "Inspired by Apple Ads": "Pastel colors with soft lighting",
                    "35mm Film Look": "Film grain with moderate contrast",
                    "Analog Grain": "Analog film effect with soft noise",
                    "Cinematic LUT": "Professional color palette with high contrast",
                    "Inspired by Blade Runner": "Blue-red palette with high contrast",
                    "Wong Kar Wai Aesthetic": "Saturated colors with dramatic bokeh"
                }
            };
            return colorGrading[lang][style] || (lang === 'id' ? "Standard cinematic LUT" : "Standard cinematic LUT");
        }

        function getExportPreset(quality, lang = 'id') {
            const presets = {
                'id': {
                    "4K": "4K UHD (3840×2160)",
                    "HD": "Full HD (1920×1080)",
                    "Cinematic Quality": "DCP Digital Cinema Package",
                    "Hyper-realistic": "8K resolution with HDR",
                    "Crystal clear": "4K with 10-bit color depth",
                    "Vintage Film (Grainy)": "Film scan 2K with grain overlay",
                    "Lo-fi Style": "480p with compression artifacts"
                },
                'en': {
                    "4K": "4K UHD (3840×2160)",
                    "HD": "Full HD (1920×1080)",
                    "Cinematic Quality": "DCP Digital Cinema Package",
                    "Hyper-realistic": "8K resolution with HDR",
                    "Crystal clear": "4K with 10-bit color depth",
                    "Vintage Film (Grainy)": "Film scan 2K with grain overlay",
                    "Lo-fi Style": "480p with compression artifacts"
                }
            };
            return presets[lang][quality] || (lang === 'id' ? "Ekspor standar" : "Standard export");
        }

        function displayResults(idn, eng, opt) {
            document.getElementById('idPrompt').textContent = idn;
            document.getElementById('enPrompt').textContent = eng;
            document.getElementById('optPrompt').textContent = opt;
        }

        function showTab(tab) {
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`.tab-button[onclick="showTab('${tab}')"]`).classList.add('active');
            
            document.querySelectorAll('.prompt-box').forEach(box => {
                box.style.display = 'none';
            });
            
            document.getElementById(`${tab}Prompt`).style.display = 'block';
        }

        function copyPrompt() {
            const activePrompt = document.querySelector('.prompt-box[style="display: block;"]');
            if (activePrompt) {
                navigator.clipboard.writeText(activePrompt.textContent)
                    .then(() => showToast('Prompt berhasil disalin!'))
                    .catch(err => console.error('Error copying text: ', err));
            }
        }

        function exportPrompt() {
            const activePrompt = document.querySelector('.prompt-box[style="display: block;"]');
            if (activePrompt) {
                const blob = new Blob([activePrompt.textContent], {type: 'text/plain'});
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `prompt_${new Date().toISOString().slice(0,10)}.txt`;
                a.click();
                URL.revokeObjectURL(url);
                showToast('Prompt berhasil diekspor!');
            }
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        function saveToHistory(prompt) {
            history.unshift({
                content: prompt,
                date: new Date().toLocaleString()
            });
            
            if (history.length > 5) history.pop();
            localStorage.setItem('promptHistory', JSON.stringify(history));
            renderHistory();
        }

        function renderHistory() {
            const historyList = document.getElementById('historyList');
            historyList.innerHTML = '';
            
            if (history.length === 0) {
                historyList.innerHTML = '<p>Belum ada riwayat prompt.</p>';
                return;
            }

            history.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'history-item';
                div.innerHTML = `
                    <div>
                        <strong>Prompt ${index + 1}</strong>
                        <div style="font-size: 0.85em; color: #666; margin-top: 4px;">${item.date}</div>
                    </div>
                    <div class="history-buttons">
                        <button class="btn-secondary" onclick="loadHistory(${index})">Muat</button>
                        <button class="btn-secondary" onclick="deleteHistory(${index})">Hapus</button>
                    </div>
                `;
                historyList.appendChild(div);
            });
        }

        function loadHistory(index) {
            const prompt = history[index].content;
            document.getElementById('idPrompt').textContent = prompt;
            document.getElementById('enPrompt').textContent = '';
            document.getElementById('optPrompt').textContent = '';
            document.querySelector('.tab-button.active').classList.remove('active');
            document.querySelector('.tab-button[onclick="showTab(\'id\')"]').classList.add('active');
            document.querySelectorAll('.prompt-box').forEach(box => {
                box.style.display = 'none';
            });
            document.getElementById('idPrompt').style.display = 'block';
            showToast('Prompt dimuat dari riwayat!');
        }

        function deleteHistory(index) {
            history.splice(index, 1);
            localStorage.setItem('promptHistory', JSON.stringify(history));
            renderHistory();
            showToast('Prompt dihapus dari riwayat!');
        }

        function addCharacter() {
            const name = document.getElementById('characterName').value;
            const appearance = document.getElementById('physicalAppearance').value;
            const clothing = document.getElementById('clothingStyle').value;
            
            if (!name || !appearance || !clothing) {
                showToast('Harap isi semua detail karakter!');
                return;
            }
            
            const character = {
                id: Date.now(),
                name,
                appearance,
                clothing
            };
            
            characters.push(character);
            renderCharacters();
            
            // Reset form
            document.getElementById('characterName').value = '';
            document.getElementById('physicalAppearance').value = '';
            document.getElementById('clothingStyle').value = '';
            
            showToast('Karakter berhasil ditambahkan!');
        }
        
        function renderCharacters() {
            const characterList = document.getElementById('characterList');
            characterList.innerHTML = '';
            
            if (characters.length === 0) {
                characterList.innerHTML = '<p>Belum ada karakter yang ditambahkan.</p>';
                return;
            }
            
            characters.forEach(character => {
                const div = document.createElement('div');
                div.className = 'character-item';
                div.innerHTML = `
                    <div>
                        <strong>${character.name}</strong>
                        <div style="font-size: 0.9em; margin-top: 5px;">${character.appearance.substring(0, 50)}...</div>
                    </div>
                    <div class="history-buttons">
                        <button class="btn-secondary" onclick="selectCharacter(${character.id})">Pilih</button>
                        <button class="btn-secondary" onclick="deleteCharacter(${character.id})">Hapus</button>
                    </div>
                `;
                characterList.appendChild(div);
            });
        }
        
        function selectCharacter(id) {
            const character = characters.find(c => c.id === id);
            if (character) {
                document.getElementById('characterName').value = character.name;
                document.getElementById('physicalAppearance').value = character.appearance;
                document.getElementById('clothingStyle').value = character.clothing;
                selectedCharacter = character;
                showToast(`Karakter "${character.name}" dipilih!`);
            }
        }
        
        function deleteCharacter(id) {
            characters = characters.filter(c => c.id !== id);
            renderCharacters();
            showToast('Karakter dihapus!');
        }

        // Load saved data
        window.onload = function() {
            // Dark mode
            const savedDarkMode = localStorage.getItem('darkMode');
            if (savedDarkMode === 'true') {
                darkMode = true;
                document.body.classList.add('dark-mode');
                const darkModeBtn = document.querySelector('[onclick="toggleDarkMode()"]');
                darkModeBtn.innerHTML = '☀️';
            }

            // History
            const savedHistory = localStorage.getItem('promptHistory');
            if (savedHistory) {
                history = JSON.parse(savedHistory);
                renderHistory();
            }
            
            // Characters
            const savedCharacters = localStorage.getItem('characters');
            if (savedCharacters) {
                characters = JSON.parse(savedCharacters);
                renderCharacters();
            }
            
            // Save characters to localStorage when page is about to unload
            window.addEventListener('beforeunload', () => {
                localStorage.setItem('characters', JSON.stringify(characters));
            });
        }
    </script>
</body>
</html>